H.util.eval("N.prototype.N=ca(0,function(a){var b=this.g,c,d=this;a!==x?(B(a,Vg,N.prototype.N,0),c=a):c=bh;c!==b&&b.Ea(function(a,b,g){return d.o(a)?(c.add(a,b,g),!0):!1});this.g=c});function S(a,b,c,d,e,f){if(a&&b)this.ce(a),this.nd(b),this.lc(c),this.j(e),this.l(f),this.zf(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}r(\"H.service.Url\",S);\nfunction jm(a,b){var c=a,d=w.document,e,f,g,h,k=d&&d.createElement(\"a\"),l=\"\";d?(b&&(f=(e=d.getElementsByTagName(\"base\")[0])&&e.href,g=d.head,h=e||g.appendChild(d.createElement(\"base\")),h.href=b),k.href=c,l=k.href,b&&(e?e.href=f:g.removeChild(h))):/[\\w]+:\\/\\//.test(c)&&(l=c);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(l);c=g[1];k=g[4];d=g[5];h=g[6];e=g[7];f=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\"\";var k=\n{},m;if(e)for(l=/([?&]?([^=&+]+))(=([^&]+))?/g;m=l.exec(e);)k[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new S(c,g,h,k,isNaN(+d)?void 0:+d,f&&0<f.length?f.substr(1):\"\")}S.parse=jm;var km=0;S.prototype.clone=function(){km++;var a={},b;for(b in this.b)a[b]=this.b[b];return new S(this.g,this.uc,this.c,a,this.f,this.a)};S.prototype.clone=S.prototype.clone;\nS.prototype.ce=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.g=a;return this};S.prototype.setScheme=S.prototype.ce;S.prototype.B=function(){return this.g};S.prototype.getScheme=S.prototype.B;S.prototype.nd=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.uc=a;return this};S.prototype.setHost=S.prototype.nd;\nS.prototype.m=function(){return this.uc};S.prototype.getHost=S.prototype.m;S.prototype.lc=function(a){this.c=a||void 0;return this};S.prototype.setPath=S.prototype.lc;S.prototype.o=function(){return this.c};S.prototype.getPath=S.prototype.o;S.prototype.zf=function(a){if(a)if(\"object\"==typeof a)this.b=a;else throw Error('Parameter \"params\" must be an object.');else this.b={};return this};S.prototype.setQuery=S.prototype.zf;S.prototype.i=function(){return!lm(this)};S.prototype.hasQuery=S.prototype.i;\nS.prototype.s=function(){return this.b};S.prototype.getQuery=S.prototype.s;S.prototype.j=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.f=+a||void 0;return this};S.prototype.setPort=S.prototype.j;S.prototype.v=function(){return this.f};S.prototype.getPort=S.prototype.v;S.prototype.l=function(a){this.a=a||void 0;return this};S.prototype.setAnchor=S.prototype.l;S.prototype.A=function(){return this.a};S.prototype.getAnchor=S.prototype.A;\nS.prototype.$=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.b,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};S.prototype.mergeQuery=S.prototype.$;S.prototype.xa=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.nd(a+\".\"+this.uc)};S.prototype.addSubDomain=S.prototype.xa;\nS.prototype.R=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.lc((this.c?this.c+\"/\":\"\")+a)};S.prototype.addSubPath=S.prototype.R;S.prototype.toString=function(){return[this.g+\"://\",this.uc,this.f?\":\"+this.f:\"\",this.c||!lm(this)||this.a?\"/\":\"\",this.c?encodeURI(this.c):\"\",mm(this),this.a?\"#\"+encodeURIComponent(this.a):\"\"].join(\"\")};S.prototype.toString=S.prototype.toString;\nfunction mm(a){var b=[],c,d=a.b,e;for(c in d)d.hasOwnProperty(c)&&\"function\"!==typeof d[c]&&(e=a.b[c],b.push(encodeURIComponent(c)+(void 0===e?\"\":\"=\"+encodeURIComponent(e))));return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function lm(a){var b,c=0;for(b in a.b)if(a.b.hasOwnProperty(b)&&\"function\"!==typeof a.b[b]&&(c++,0<c))break;return!c};function nm(a){function b(b){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete nm.a[f];b&&a.Zc&&a.Zc.call(k,b)}if(!a.url||!a.nc)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.nc)throw Error(\"Parmaters options.callback must be a function\");var c=a.Ti||document,d=c.getElementsByTagName(\"head\")[0],e=c.createElement(\"script\"),c=a.url instanceof S?a.url:jm(a.url,a.Si),f=nm.c++,g=a.xd||\"callback\",h=a.nc,k={},l=null;k.id=f;k.cancel=function(){b(\"cancelled\")};\n0!==a.timeout&&(l=w.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));nm.a[f]=function(a){b();h.call(k,a)};e.type=\"text/javascript\";e.src=c.toString()+(c.i()?\"&\":\"?\")+g+\"=\"+(a.rf?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}r(\"H.service.jsonp\",nm);nm.b=function(a){return(a=nm.a[a])?a:function(){}};nm.handleResponse=nm.b;nm.c=0;nm.a={};function om(a){a=a||{};this.F=a.subDomain;this.c=a.path;this.N=a.callbackKey;this.f=a.baseUrl}r(\"H.service.AbstractRestService\",om);om.prototype.W=function(a,b,c,d,e){this.a=(e||this.f).clone();this.F&&this.a.xa(this.F);this.c&&this.a.lc(this.c);c&&this.a.ce(\"https\");return this};om.prototype.configure=om.prototype.W;om.prototype.aa=function(){return this.a};\nfunction pm(a,b,c,d){if(!sa(c))throw Error(\"onResult callback needed\");if(!sa(d))throw Error(\"onError callback needed\");return nm({url:b,nc:function(a){c(a)},Zc:function(a){d(Error(\"[\"+a+\"] \"+b+\" request failed\"))},xd:a.N})};function T(a){a=qm(rm,a);this.v(a.baseUrl);this.c(a.useCIT);this.g(a.useHTTPS);sm(this,a.app_id,a.app_code);this.a={}}r(\"H.service.Platform\",T);function sm(a,b,c){a.l=b;a.i=c;a.f.$({app_id:b,app_code:c})}T.prototype.W=function(a){if(a.configure)return a.configure(this.l,this.i,this.B,this.s,this.f);throw Error(\"Object is not configurable\");};T.prototype.configure=T.prototype.W;T.prototype.g=function(a){this.B=a;this.f.ce(a?\"https\":\"http\")};T.prototype.setUseHTTPS=T.prototype.g;\nT.prototype.c=function(a){this.s=a;this.f.nd((a?\"cit.\":\"\")+this.A)};T.prototype.setUseCIT=T.prototype.c;T.prototype.v=function(a){this.A=a.uc;this.f=a=a.clone();a.$({xnlp:\"CL_JSMv3.\"+rl().version});this.c(this.s);this.g(this.B);sm(this,this.l,this.i)};T.prototype.setBaseUrl=T.prototype.v;T.prototype.C=function(){return this.f};T.prototype.getBaseUrl=T.prototype.C;var rm={app_id:null,app_code:null,useHTTPS:!1,useCIT:!1,baseUrl:new S(\"http\",\"api.here.com\")};\nr(\"H.service.setOptions\",function(a,b){rm[a]=b});r(\"H.service.getOptions\",function(a){return rm[a]});function qm(a,b){var c=b||{},d;for(d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d]),b&&b.hasOwnProperty(d)&&(c[d]=b[d]);return c};function tm(a){a=qm(rm.trafficIncidents,a);a.callbackKey=\"jsoncallback\";tm.u.constructor.call(this,a)}v(tm,om);r(\"H.service.TrafficIncidentsService\",tm);tm.prototype.W=function(a,b,c,d,e){tm.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};tm.prototype.configure=tm.prototype.W;tm.prototype.g=function(a,b,c){a=this.aa().clone().R(\"incidents.json\").$(a);return pm(this,a,b,c)};tm.prototype.requestIncidents=tm.prototype.g;\ntm.prototype.b=function(a,b,c,d,e,f){a=this.aa().clone().R([\"incidents/json\",c,a,b].join(\"/\")).$(f||{});return pm(this,a,d,e)};tm.prototype.requestIncidentsByTile=tm.prototype.b;rm.trafficIncidents={subDomain:\"traffic\",path:\"traffic/6.1\"};T.prototype.m=function(){return this.W(new tm)};T.prototype.getTrafficIncidentsService=T.prototype.m;function um(){this.Ff={}}function vm(a){var b,c=a.boxes,d,e;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length))for(d=c[0],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a=new G(d[0],d[1],d[2],d[3]),a=1;a<b;a++)d=c[a],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.wb(e,!1,this.a)}vm.prototype.wc=function(a,b){var c;if(a>=this.min&&a<=this.max)if((c=this.b.length)&&this.a){if(this.a.wc(b))for(;c--;)if(this.b[c].wc(b))return!0}else return!0;return!1};function wm(a){var b=0,c,d,e=a.length;if(0===e)return b;for(c=0;c<e;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b}var xm=Function(\"return this\")();function ym(a,b){function c(){k=Aa();te.font=g;h=Math.round(te.measureText(\"BESbswyMi\").width);-1===e.indexOf(h)?b():3E5<k-d?b(\"timeout\"):(l=50*++f,xm.setTimeout(c,Math.min(l,d+3E5-k)))}var d=Aa(),e=zm(),f=0,g=\"35px \"+a+\",\"+Am.join(\",\"),h,k,l;-1!==Am.indexOf(a)?b():xm.setTimeout(c,50)}\nfunction Bm(a,b){function c(a){a?b(a):0===--d&&b()}var d=a.length;a.forEach(function(a){ym(a,c)})}var Am=Ra(\"monospace serif\");function zm(){var a=[];Am.forEach(function(b){te.font=\"35px \"+b;a.push(Math.round(te.measureText(\"BESbswyMi\").width))});return a}function Cm(a,b){var c=b||document,d=c.createElement(\"style\"),e;d.appendChild(c.createTextNode(\"\"));c.head.appendChild(d);e=d.sheet;a.forEach(function(a,b){e.insertRule(a,b)});return d}function Dm(){}\nDm.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||xm.document.createElement(\"canvas\")};Dm.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Em=new Dm;function Fm(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.aa().clone().R(b+\"/\"+a.Cb()+\"/\"+c).$(f),l=a.i;this.service_=a;this.tileBaseUrl_=k;Pk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(a,b,c){var f=h.tileBaseUrl_.clone();l&&f.xa(l[(c+b+a)%l.length]);f.R(c+\"/\"+a+\"/\"+b+\"/\"+d+\"/\"+e);return f.toString()},crossOrigin:g.crossOrigin,uri:k.toString().replace(/_/g,\"\")+d});this.tileType_=b;this.scheme_=c;this.params_=f;this.copyrightKey_=c.split(\".\")[0];this.C=z(this.C,this);\nthis.getCopyrights=this.Ia;this.U=wc();a.addEventListener(\"versionupdate\",this.C)}v(Fm,Pk);Fm.prototype.MAX_STORE_TIME=2592E6;Fm.prototype.D=function(){Pk.prototype.D.call(this);this.service_.removeEventListener(\"versionupdate\",this.C)};Fm.prototype.Ia=function(a,b){var c=this.service_.Ia().Ff[this.copyrightKey_],d,e=c?c.length:0,f=[];for(d=0;d<e;d++)c[d].wc(b,a)&&f.push(c[d]);return f};\nFm.prototype.C=function(){var a=this.service_;this.tileBaseUrl_=a.aa().clone().R(this.tileType_+\"/\"+a.Cb()+\"/\"+this.scheme_).$(this.params_);this.j(!1)};Fm.prototype.Rc=function(){return this.U};r(\"H.service.MapTileProvider.prototype.canStore\",Fm.prototype.Rc);Fm.prototype.B=function(){return this.Rc()?vc():N.prototype.B.call(this)};r(\"H.service.MapTileProvider.prototype.getStorage\",Fm.prototype.B);function Gm(a){a=qm(rm.maptile,a);I.call(this);this.f=a.baseUrl;this.c=a.path;this.o=a.subDomain;this.i=a.shards;this.ra=(this.s=!!a.ignoreTypes)?null:a.type;this.g=a.version;this.j=new um;this.m={};this.Ad=0}v(Gm,I);r(\"H.service.MapTileService\",Gm);function Hm(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nGm.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.o&&this.a.xa(this.o);this.ra&&this.a.xa(this.ra);this.c&&this.a.lc(this.c);\"newest\"===this.g&&Im(this);return this};Gm.prototype.configure=Gm.prototype.W;Gm.prototype.aa=function(){return this.a};Gm.prototype.A=function(){return this.ra};Gm.prototype.getType=Gm.prototype.A;Gm.prototype.Cb=function(){return this.g};Gm.prototype.getVersion=Gm.prototype.Cb;\nGm.prototype.Ia=function(){this.Ad||(this.g&&\"newest\"!==this.g||\"traffic\"===this.ra)&&Jm(this);return this.j};Gm.prototype.getCopyrights=Gm.prototype.Ia;\nfunction Im(a){var b=a.aa().clone().R(\"info\").$({output:\"json\"});a.i&&b.xa(a.i[0]);nm({url:b,xd:\"callback_func\",nc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Hm(b,\"map\");Hm(b,\"scheme\");Hm(b,\"tiletype\");Hm(b,\"format\");Hm(b,\"resolution\");Hm(b,\"language\");if(\"newest\"===a.g&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.g=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Zc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @ \"+\nb.toString());},rf:!0})}function Jm(a){var b=a.aa().clone().R(\"copyright\").R(a.Cb()).$({output:\"json\"});a.i&&b.xa(a.i[0]);a.Ad=1;nm({url:b,xd:\"callback_func\",nc:function(b){this.Ad=2;b=JSON.parse(b);var d=a.j,e;for(e in b)if(b.hasOwnProperty(e))for(var f=b[e],g=d.Ff[e]||(d.Ff[e]=[]),h=void 0,k=f.length,h=0;h<k;h++)g.push(new vm(f[h]));a.dispatchEvent(\"copyrightupdate\")},Zc:function(a){this.Ad=-1;throw Error(\"[\"+a+\"]: Could not fetch copyrights from map tile service @\"+b.toString());},rf:!0})}\nGm.prototype.B=function(){return this.l};Gm.prototype.getInfo=Gm.prototype.B;Gm.prototype.v=function(a,b,c,d,e,f){var g;g=wm(this.aa().clone().R(a+\"/\"+this.Cb()+\"/\"+b+\"/\"+c+\"/\"+d).$(e?e:{}).toString());var h=this.m[g];h||(h=new Fm(this,a,b,c,d,e,f),this.m[g]=h);return h};Gm.prototype.createTileProvider=Gm.prototype.v;Gm.prototype.b=function(a,b,c,d,e,f,g,h){a=this.v(a,b,c,d,e,h);return new oh(a,{opacity:f,dark:!!g})};Gm.prototype.createTileLayer=Gm.prototype.b;\nrm.maptile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};T.prototype.b=function(a){var b;b=qm(rm.maptile,a);var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=wm(c);c=this.a[b];c||(c=this.W(new Gm(a)),this.a[b]=c);return c};T.prototype.getMapTileService=T.prototype.b;function Km(a){this.f=a;this.hb=this.a(\"general\",\"default\")||Lm;this.c=new Vg(200)}Km.prototype.b=function(a,b){var c,d,e,f,g;for(g=1;g<arguments.length;g++)for(c in d=arguments[g],d)if(d.hasOwnProperty(c))for(e in a[c]||(a[c]={}),f=d[c],f)f.hasOwnProperty(e)&&void 0!==f[e]&&(a[c][e]=f[e]);return a};Km.prototype.Na=function(a,b){var c=this.a(\"spaceToGroup\",b);return Mm(this,a,c?c+\"\":void 0)};\nfunction Mm(a,b,c){var d,e,f;f=(b?b+\"_\":\"\")+(c?c:\"default\");d=a.hb;(e=a.c.get(f))?d=e:(b&&c?(d=Mm(a,b,void 0),e=Mm(a,void 0,c),b=a.a(\"venues\",b,\"groups\",c),d=a.b({},a.hb,d,e,b)):b&&!c?d=a.b({},a.hb,a.a(\"venues\",b,\"default\")):!b&&c&&(d=a.b({},a.hb,a.a(\"general\",\"groups\",c))),a.c.add(f,d,1));return d}Km.prototype.a=function(a){for(var b=this.f,c=arguments,d=c.length,e=0;e!==d;)if(b=b[c[e++]],!b)return;return b};\nvar Lm={space:{fillColor:\"rgba(198, 175, 255, .7)\",strokeColor:\"rgb(162, 141, 216)\",lineWidth:.5},spaceLabel:{fillColor:\"rgb(78,66,111)\"},floor:{fillColor:\"rgba(249, 244, 253, .7)\",strokeColor:\"rgba(255, 255, 255, .7)\",lineWidth:1}};function Nm(a,b,c,d,e,f,g,h){this.Ta=[];this.A={};Xk.call(this,a,b,c,d,e,f,g,h)}v(Nm,Xk);function Om(){}Om.prototype.Ib=function(){};r(\"H.service.remote.IObject.prototype.retain\",Om.prototype.Ib);Om.prototype.v=function(){};r(\"H.service.remote.IObject.prototype.release\",Om.prototype.v);function Pm(a,b){var c={};this.I=a;Ca(c,b||c);Kk.call(this,c);this.kc={};Qm(this)}v(Pm,Kk);r(\"H.service.remote.ObjectProvider\",Pm);Pm.prototype.J=function(){Kk.prototype.J.call(this)};function Qm(a){a=a.N(Pe.SPATIAL);a.c(a.a+1,Me.ADD)}var Rm=[];Pm.prototype.c=function(){return Rm};Pm.prototype.requestMarkers=Pm.prototype.c;Pm.prototype.b=function(){return Rm};Pm.prototype.requestDomMarkers=Pm.prototype.b;Pm.prototype.l=Be;Pm.prototype.providesMarkers=Pm.prototype.l;Pm.prototype.i=Be;\nPm.prototype.providesDomMarkers=Pm.prototype.i;Pm.prototype.s=function(){return!0};Pm.prototype.providesSpatials=Pm.prototype.s;Pm.prototype.o=function(){return Rm};Pm.prototype.requestSpatials=Pm.prototype.o;function Sm(a){return a.getVisibility(!0)}Pm.prototype.g=function(a,b){var c=Tm(this,a,Um);b&&(c=c.filter(Sm));return c};Pm.prototype.requestSpatialsByTile=Pm.prototype.g;function Tm(a,b,c){var d=b.i&&b.i[c],e;!d&&(e=b.v)&&(delete b.v,(b.i=a=a.I.parse(a,b,e))&&(d=a[c]));return d||Rm}\nPm.prototype.V=function(a){var b=a.ta();if(this.kc[b])throw new kc(this.V,\"Remote object \"+b+\" already added\");return this.kc[b]=a};Pm.prototype.a=function(a){delete this.kc[a.ta()]};var Um=\"spatials\";function Vm(a,b,c){Pm.call(this,b,c);this.f=a;this.responseQueue_=[];Wm(this.f)||(this.Vd=z(this.Vd,this),this.f.addEventListener(\"statechange\",this.Vd));this.v=a.o;this.j=0;this.B={onSpaceCreated:c&&c.onSpaceCreated,floorLevel:0,styler:null};this.requestSpatialsByTile=z(this.g,this)}v(Vm,Pm);Vm.prototype.T=function(a,b,c,d){this.vf?this.Tg.apply(this,arguments):d||this.responseQueue_.push({Bi:a,response:c,Uh:b});d&&(a.A[b]=!0)};function Xm(a){return a.getVisibility(!0)}\nVm.prototype.g=function(a,b,c){var d;this.Zg||Ym(this);d=a.a;b&&(d=d.filter(Xm));if(!c){b=this.j;var e,f,g,h;if(!a.A[b]&&Wm(this.f)){e=this.f.aa();c=a.x;f=a.y;h=g=a.z;for(var k=1,l;h--;)l=1<<h,k*=4,k+=(c&l&&1)|(f&l&&2);h=k.toString(4).substr(1);e=e.clone().R(\"0/tiles-ia\").R(\"L\"+b).R(h+\".json\");this.v&&e.xa(this.v[(c+f+g)%this.v.length]);c=new Gh(\"text/plain\",e.toString());c.then(z(this.T,this,a,b),sc);a.A[b]=!0}a.A[this.j]=!0}a.l&&(d=d.concat(a.l),delete a.l);return d};\nr(\"H.service.venues.ObjectProvider.prototype.requestSpatialsByTile\",Vm.prototype.g);p=Vm.prototype;p.Kc=function(a){var b,c,d;for(b in this.kc)for(c in d=this.kc[b].C,d)d[c].Kc(a);Qm(this);Rg(this);this.j=a};p.Tg=function(a,b,c,d){if(!d&&(this.B.floorLevel=b,b=(b=this.I.parse(this,a,c,this.B))&&b.spatials))for(a.l=a.l?a.l.concat(b):b,a=b.length;a--;)b[a].ua(Me.ADD)};p.Vd=function(){Wm(this.f)&&(Zm(this),this.f.removeEventListener(\"statechange\",this.Vd))};\nfunction Zm(a){Wm(a.f)&&a.vf&&a.dispatchEvent(\"reload\")}function Ym(a){a.Zg=!0;$m(a,function(b,c){c?a.dispatchEvent(\"error\"):(a.B.styler=b,an(a,z(a.ri,a)))})}p.ri=function(a){a?this.dispatchEvent(\"error\"):(this.responseQueue_.forEach(function(a){this.Tg(a.Bi,a.Uh,a.response)},this),this.responseQueue_=null,this.vf=!0,Zm(this))};p.Zg=!1;p.vf=!1;function $m(a,b){(new Gh(\"application/json\",a.f.l.clone().R(\"styles/styles.json\").toString())).then(function(a){b(new Km(a))},function(a){b(null,a)})}\nvar bn=0;\nfunction an(a,b){var c=a.f.l.clone().R(\"fonts\"),d=document,e=[],f,g=[];2===bn?b():(cn.forEach(function(a){g.push(\"FiraGO-Regular\".replace(\"{name}\",a))}),1!==bn&&(cn.forEach(function(a,b){f=c.clone().R(g[b]);e.push('@font-face {font-family: \"FiraGO-Regular\";src: url(\"{url}.woff2\") format(\"woff2\"),url(\"{url}.woff\") format(\"woff\"),url(\"{url}.ttf\") format(\"truetype\");font-weight: normal;font-style: normal;}'.replace(/\\{name\\}/g,a).replace(/\\{url\\}/g,f.toString()))}),a.A=Cm(e,d),bn=1),Bm(g,function(c){bn=c?\n0:2;c&&a.A&&Ge(a.A);b(c)}))}var cn=[\"\"];function dn(a,b,c,d){P.call(this,en(a));this.i=c;this.f=d;this.m={};this.Za=b;this.c=0}v(dn,P);r(\"H.service.venues.Building\",dn);dn.prototype.ta=function(){return this.Za};dn.prototype.getId=dn.prototype.ta;dn.prototype.wa=function(){return this.Da};dn.prototype.getVenue=dn.prototype.wa;dn.prototype.sa=function(){return this.i};dn.prototype.getMinLevel=dn.prototype.sa;dn.prototype.Ya=function(){return this.f};dn.prototype.getMaxLevel=dn.prototype.Ya;dn.prototype.Va=function(){return this.c};\ndn.prototype.getCurrentLevel=dn.prototype.Va;dn.prototype.Kc=function(a){var b,c,d;if(!isNaN(a)&&(b=this.i,c=this.f,a!==this.c))for(this.c=a;b<=c;b++)(d=this.m[b])&&d.setVisibility(b===a);return this.c};dn.prototype.ad=function(a){return this.m[a]};dn.prototype.getFloor=dn.prototype.ad;dn.prototype.ba=function(a,b){this.i=Math.min(this.i,a);this.f=Math.max(this.f,b)};dn.prototype.adjustMinMaxLevels=dn.prototype.ba;function fn(a,b){P.call(this,en(a));this.C={};this.f=b;a.V(this)}v(fn,P);r(\"H.service.venues.Venue\",fn);fn.prototype.N=function(a){return this.C[a]};fn.prototype.getBuilding=fn.prototype.N;fn.prototype.c=function(){return this.C};fn.prototype.getBuildings=fn.prototype.c;fn.prototype.ta=function(){return this.f};fn.prototype.getId=fn.prototype.ta;function gn(a,b,c,d){d=d||hn;this.Ic={};d.provider=a;this.invalidate=sc;gn.u.constructor.call(this,b,d);delete this.invalidate;c&&(this.f=c);this.ua(Me.ADD)}v(gn,Gf);r(\"H.service.remote.Spatial\",gn);var hn={};gn.prototype.ta=function(){return this.f||Gf.prototype.ta.call(this)};gn.prototype.getId=gn.prototype.ta;gn.prototype.Ib=Function();gn.prototype.retain=gn.prototype.Ib;gn.prototype.v=Function();gn.prototype.release=gn.prototype.v;function jn(a,b){this.a=a;b&&(this.b=b)}var kn=new jn([]);\ngn.prototype.ec=function(a){return(this.Ic[a.key]||kn).a};gn.prototype.getGeometriesForTile=gn.prototype.ec;gn.prototype.ba=function(a){return(this.Ic[a.key]||kn).b};gn.prototype.getLabels=gn.prototype.ba;function ln(a,b,c,d){a.Ic[b.key]=new jn(c,d)};function mn(a,b,c){this.ra=c&&c.type||\"\";gn.call(this,a,!0,b);this.g(c)}v(mn,gn);r(\"H.service.venues.Space\",mn);mn.prototype.i=function(){return this.ra};mn.prototype.getType=mn.prototype.i;mn.prototype.c=function(){return\"floor/polygon\"===this.ra};mn.prototype.isFloorSpace=mn.prototype.c;mn.prototype.b=function(a){a&&(this.$h=new zf(a))};mn.prototype.initLabelStyle=mn.prototype.b;mn.prototype.ad=function(){var a=this.Da;return this.isFloorSpace()?a:a&&a.Da};mn.prototype.getFloor=mn.prototype.ad;\nmn.prototype.a=0;mn.prototype.Ib=function(){++this.a};mn.prototype.retain=mn.prototype.Ib;mn.prototype.v=function(){var a=--this.a,b;a||(b=this.ad(),this.isFloorSpace()?b.ib&&(b.a(b.ib),b.ib=null,nn(b)):b&&(delete b.i[this.ta()],b.c.a(this),nn(b)));return 1>a};mn.prototype.release=mn.prototype.v;function on(){}on.prototype.parse=function(){};r(\"H.service.remote.IParser.prototype.parse\",on.prototype.parse);function pn(a,b,c){P.call(this,en(a));this.f=c;this.ib=new mn(a,b.id,b);this.V(this.ib);this.c=new P(en(a));this.V(this.c);this.i={}}v(pn,P);r(\"H.service.venues.Floor\",pn);pn.prototype.sa=function(){return this.f};pn.prototype.getLevel=pn.prototype.sa;pn.prototype.m=function(){return this.ib};pn.prototype.getFloorSpace=pn.prototype.m;pn.prototype.ba=function(){return this.c};pn.prototype.getSpaces=pn.prototype.ba;pn.prototype.N=function(){return this.Da};pn.prototype.getBuilding=pn.prototype.N;\npn.prototype.getData=function(){return this.ib&&this.ib.getData()};pn.prototype.getData=pn.prototype.getData;pn.prototype.g=function(a){this.ib.g(a);return this};pn.prototype.setData=pn.prototype.g;pn.prototype.ig=function(a){return this.i[a]};pn.prototype.getSpace=pn.prototype.ig;function nn(a){if(!a.c.b&&!a.ib){var b=a.N(),c=a.f;c===b.c&&(b.c=0);delete b.m[c];b.a(a);b.b||(a=b.Da,delete a.C[b.ta()],a.a(b),a.b||a.Pa().a(a))}};function qn(){}var rn;qn.prototype.a=Math.PI/180;function sn(a,b){return a&&a.category&&a.category[b||\"id\"]}function tn(a){var b,c;return a.sort(function(a,e){b=a.object.type;c=e.object.type;return b>c?-1:b<c?1:0})}\nqn.prototype.parse=function(a,b,c,d){var e=d.floorLevel,f=d.onSpaceCreated;d=d.styler;var g=[],h,k,l,m,n,q,u,t,y,K={};rn=!1;c=c.replace(/''( )?/g,'$1\\\\\"');try{c=xm.JSON.parse(c)}catch(V){rn=!0}if(c.length)for(c=tn(c),h=c.length;h--;){k=c[h];l=k.area;n=l.length;u=t=q=void 0;(t=0<n)||(rn=!0,t=void 0);if(t)for(q=Array(n/2);n;)u=l[--n],t=l[--n],q[n/2]=new M(t,u);l=q?{Ra:[q]}:A;k=k.object;t=y=x;if(1!==k.type)switch(n=k.type.replace(\"/polygon\",\"\"),n){case \"floor\":n=q=k.buildingId;(t=a.kc[n])||(t=new fn(a,\nn),t.ia(a));u=k.buildingMinLevel;y=k.buildingMaxLevel;(n=t.N(q))?n.adjustMinMaxLevels(u,y):(n=new dn(a,q,u,y),q=t,t=n,q.C[t.ta()]=t,q.V(t),n.Kc(a.j));0>b.Ta.indexOf(n)&&b.Ta.push(n);(q=n.ad(e))?(n=q.ib,t=n.ec(b),t.length&&(l?l.Ra=t[0].Ra.concat(l.Ra):l=t[0])):(t=q=new pn(a,k,e),u=t.f,t.setVisibility(u===n.c),n.m[u]=t,n.V(t),n=q.ib,f&&f(n),u=sn(q.getData(),\"profileKey\"),y=d.Na(u,void 0),n.O(y.floor));K[k.id]=q;0>g.indexOf(n)&&g.push(n);l&&ln(n,b,[l]);break;case \"hollow\":t=\"hollow-area\";case \"space\":if(m=\nk.id,q=K[/_d$/.test(k.outerAreaId)?k.outerAreaId:k.outerAreaId+\"_d\"])n=q.ig(m),u=sn(q.getData(),\"profileKey\"),t=t||sn(n?n.getData():k),n||(y=n=new mn(a,m,k),q.i[y.ta()]=y,q.c.V(y),y=d.Na(u,t),n.O(y.space),f&&f(n)),n.Ib(),(k=k.label)&&k.firstLinePos?(y=y||d.Na(u,t),q=n.$h,q=[{lines:Ra(k.text,\"\\n\"),angle:k.rotation*this.a,font:\"FiraGO-Regular\",size:k.font.size,lineHeight:k.font.lineHeight,color:q&&q.fillColor||y.spaceLabel.fillColor,x:k.firstLinePos[0],y:k.firstLinePos[1]}],\"nokiapuretextac_rg-webfont\"===\nk.font.face&&(q[0].size=Math.floor(k.font.size/1.26))):q=null,g.push(n),l&&ln(n,b,[l],q)}}else rn=!0;return rn?void 0:{spatials:g}};r(\"H.service.venues.Parser.prototype.parse\",qn.prototype.parse);function un(a,b){var c=b||{};if(!(a&&a instanceof vn))throw Error(\"InvalidArgument: service required\");this.Ye=z(this.Ye,this);this.b=new Vm(a,new qn,{min:16,max:20,onSpaceCreated:c.onSpaceCreated});this.b.ia(this);this.Xe=z(this.Xe,this);this.b.addEventListener(\"update\",this.Xe);this.lf=z(this.lf,this);this.b.addEventListener(\"reload\",this.lf);this.kf=z(this.kf,this);this.b.addEventListener(\"error\",this.kf);this.Ze=c.pixelRatio||c.pixelratio||1;this.tileSize=256;this.f=Tg(this.tileSize,this.Ze);\nN.call(this,{min:16,max:20});this.N(new Vg(c.tileCacheSize||256,z(this.Ye,this)))}v(un,N);r(\"H.service.venues.TileProvider\",un);p=un.prototype;p.Ze=1;p.Xe=function(){this.dispatchEvent(\"update\")};p.kf=function(){this.dispatchEvent(\"error\")};p.lf=function(){this.j(!0)};p.Ye=function(a,b){var c,d,e;c=b.a;for(e=c.length;e--;)d=c[e],delete d.Ic[b.key],d.v();b.data&&Em.push(b.m(),this.tileSize);b.o()};p.Kc=function(a){this.b.Kc(a)};un.prototype.setCurrentLevel=un.prototype.Kc;un.prototype.C=function(){return this.b.j};\nun.prototype.getCurrentLevel=un.prototype.C;un.prototype.c=function(a,b,c,d){var e;this.g.get(this.getTileKey(a,b,c))?d(null,null):e=xm.setTimeout(function(){d(null,null)},500);return{cancel:function(){xm.clearTimeout(e)}}};un.prototype.requestInternal=un.prototype.c;un.prototype.P=function(a,b,c){var d=Em.pop(this.tileSize),e=this.g.get(this.getTileKey(a,b,c));e||(e=new Nm(this.A(a,b,c),a,b,c,this.tileSize,this.Ze,c+this.f,this.b));e.ca(d)||Em.push(d,this.tileSize);return e};\nun.prototype.createTileInternal=un.prototype.P;function vn(a){var b=rm.venues;a=qm(b,a||{});I.call(this);this.f=b.baseUrl;this.c=a.path;this.g=a.subDomain;this.o=b.shards}v(vn,I);r(\"H.service.venues.Service\",vn);var wn={ERROR:-1,INIT:0,READY:1};vn.State=wn;\nvn.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.l=this.a.clone().xa(\"js\").R(\"statics/venues\").zf();this.g&&this.a.xa(this.g);this.ra&&this.a.xa(this.ra);this.c&&this.a.lc(this.c);a=rm.venueSignature;b=this.a.clone();b.xa(a.subDomain);b.R(a.path);b.R(a.version);this.v=b;this.m=this.a.clone();this.G===wn.INIT&&this.b();return this};vn.prototype.configure=vn.prototype.W;function Wm(a){return a.G===wn.READY}vn.prototype.aa=function(){return Wm(this)?this.a:void 0};\nvn.prototype.b=function(){var a=this;(new Gh(\"application/json\",this.v.toString())).then(function(b){var c=b.SignatureTokens,d=(b=new Date(b.Expires))?b.getTime()-Aa()-36E5:0;a.a.$(c);b&&4E9>d&&xm.setTimeout(z(a.b,a),Math.max(d,0));xn(a,wn.READY)},function(){xn(a,wn.ERROR,\"Error fetching signature\")})};\nvn.prototype.j=function(a,b,c){var d=rm.venuesDiscovery;a=this.m.clone().xa(d.subDomain).R(d.path).R(d.version).$(qm(a,d.params));(new Gh(\"application/json\",a.toString())).then(b,function(a){a.json().then(function(a){c(a.status.message)},function(){c(a.statusText)})})};vn.prototype.discover=vn.prototype.j;vn.prototype.i=function(a){return new oh(new un(this,a))};vn.prototype.createTileLayer=vn.prototype.i;vn.prototype.G=wn.INIT;vn.prototype.getState=function(){return this.G};\nvn.prototype.getState=vn.prototype.getState;function xn(a,b,c){var d=new Bc(\"statechange\",a);c&&(d.errorCode=c);a.G=b;a.dispatchEvent(d)}T.prototype.o=function(a){return this.W(new vn(a))};T.prototype.getVenueService=T.prototype.o;var yn={subDomain:\"venue.maps\",path:\"\",shards:Ra(\"1 2 3 4\").map(function(a){return\"static-\"+a})};rm.venues=yn;rm.venueSignature={version:\"v1\",subDomain:\"signature\",path:\"venues/signature\"};rm.venuesDiscovery={version:\"v1\",subDomain:\"discovery\",path:\"venues/discovery\"};var zn={};function en(a){zn.provider=a;return zn};function An(){this.a={}}An.prototype.rb=function(a,b){var c=a+b,d,e,f;if(!(d=this.a[c])){f={size:{w:26,h:32},anchor:{x:13,y:30}};if(\"CLOSURE\"!==a)switch(d=Bn,a){case \"CONGESTION\":d=d.replace(\"{{icon}}\",Cn);break;case \"ROADWORKS\":d=d.replace(\"{{icon}}\",Dn);break;case \"ACCIDENT\":d=d.replace(\"{{icon}}\",En);break;default:d=d.replace(\"{{icon}}\",Fn)}else d=Gn,f.anchor.y=16;e=Hn[b]||Hn.BLOCKING;d=d.replace(\"{{color}}\",e);this.a[c]=d=new ri(d,f)}return d};\nvar Hn={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Cn='<path d=\"m 18,15 0,0 c 0,-0.1 0,-0.2 0,-0.4 l 0,-0.2 c 0,-0.1 0,-0.2 0,-0.4 0,0 0,0 0,0 0.6,0 1.1,-0.4 1.1,-1 0,-0.5 -0.5,-1 -1,-1 -0.7,0 -1.1,0.5 -1.1,1 -0.1,0 -0.3,-0.1 -0.4,-0.1 l -0.6,0 -0.3,-0.5 C 15.2,11.6 14.3,11 13.3,11 L 18,11 17.2,9.6 C 17,9.3 16.7,9 16.3,9 L 12.8,9 C 12.4,9 12,9.3 11.8,9.6 L 11.1,11 9.8,11 C 9.7,11 9.6,11 9.5,11 9.2,11 9,10.9 9,10.6 L 9,10.4 C 9,10.2 9.2,9.9 9.5,9.9 l 1.2,0 0.6,-1.04 c 0.3,-0.5 0.9,-0.9 1.5,-0.9 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1.04 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 18.3,16 18,15.8 18,15.6 L 18,15 z M 8,18.1 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.6,0 -1.1,0.5 -1.1,1 0,0.6 0.5,1.1 1.1,1.1 m 7,0 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.5,0 -1,0.5 -1,1 0,0.6 0.5,1.1 1,1.1 M 14.2,13.6 C 14,13.3 13.7,13 13.3,13 L 9.8,13 C 9.4,13 9,13.3 8.8,13.6 L 8.1,15 15,15 14.2,13.6 z m -8.2,1 0,-0.2 c 0,-0.2 0.2,-0.5 0.5,-0.5 l 1.1,0 0.7,-1 C 8.6,12.4 9.2,12 9.8,12 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 15.3,20 15,19.8 15,19.6 L 15,19 8,19 8,19.6 C 8,19.8 7.8,20 7.5,20 l -1,0 C 6.2,20 6,19.8 6,19.6 l 0,-3.4 c 0,-0.4 0.2,-0.8 0.6,-1.1 l -0.1,0 C 6.2,15.1 6,14.9 6,14.6\" fill=\"#ffffff\" />',\nDn='<path d=\"m 9.24,13.2 -3.7,6.8 1.3,0 2.8,-5.1 1.36,1.5 0,3.6 1.1,0 0,-4 -1.4,-1.6 -1.46,-1.2 z M 14.2,9.5 c 0.7,0 1.3,-0.5 1.3,-1.21 0,-0.7 -0.6,-1.2 -1.3,-1.2 -0.7,0 -1.2,0.5 -1.2,1.2 0,0.71 0.5,1.21 1.2,1.21 m -4.46,0.5 1.06,0 -0.96,2.1 -1,-0.8 0.9,-1.3 z m 2.56,4 -1,-0.7 1,-1.9 0,2.6 z m 6.9,1.7 c -0.4,-0.5 -1.5,-1.1 -2.3,0 -0.2,0.3 -0.6,0.7 -0.9,1.2 l -2.7,-2.1 0,-5 -0.8,-0.7 -3.26,0 -1.5,2.3 7.86,6 C 14.7,18.6 13.8,20 13.8,20 l 6,0 1.5,-1.6 c 0,0 -1.7,-2.2 -2.1,-2.7\" fill=\"#ffffff\" />',En=\n'<path d=\"m 10.2,15.9 c 0.4,-0.5 1,-0.5 1.4,0 0.5,0.4 0.5,1 0,1.4 -0.4,0.4 -1,0.4 -1.4,0 -0.45,-0.4 -0.45,-1 0,-1.4 m 4.9,-5 c 0.4,-0.4 1.1,-0.4 1.5,0 0.4,0.4 0.4,1.1 0,1.5 -0.4,0.4 -1.1,0.4 -1.5,0 -0.4,-0.4 -0.4,-1.1 0,-1.5 m 2.6,3.8 c 0.1,0.3 0,0.7 -0.3,1 l -1.9,1 c 0,0 0,0.8 0,1.1 0,0.3 0,0.2 -0.1,0.3 -0.1,0.1 -0.3,0.2 -0.5,0.2 l -2.6,-0.3 4.9,-4.9 0.5,1.6 z m -6.5,5 0.1,0.2 c 0.2,0.1 0.5,0.1 0.7,0 l 0.8,-0.9 1.8,0.1 c 1.1,0 1.4,0 1.7,-0.6 l 0.1,-1.3 1.8,-0.8 c 0.4,-0.4 0.6,-1.1 0.4,-1.7 l -0.3,-1.1 0.8,-0.8 c 0.2,-0.2 0.2,-0.5 0,-0.7 L 19,12 c -0.2,-0.2 -0.5,-0.2 -0.7,0 l -0.1,0.1 c 0.1,-0.5 -0.1,-0.9 -0.4,-1.3 L 15.5,8.44 C 15.3,8.26 15,8.26 14.8,8.44 l -0.7,0.74 c -0.2,0.19 -0.2,0.49 0,0.68 l 0.3,0.34 -4.92,5 -0.36,-0.4 C 8.93,14.6 8.63,14.6 8.45,14.8 L 7.7,15.6 c -0.18,0.1 -0.18,0.4 0,0.6 l 2.4,2.4 c 0.3,0.3 0.7,0.4 1.2,0.4 l -0.1,0.1 c -0.2,0.2 -0.2,0.5 0,0.7 m 5.6,-0.8 3.9,0 1.6,-2 -5.5,2 z m -8.08,0 -3.28,-1.8 0.9,1.8 2.38,0 z\" fill=\"#ffffff\" />',\nFn='<path d=\"m 12.9,15.1 c 0.6,0 1.1,-0.5 1.1,-1 l 0.4,-5.9 c 0,-0.6 -0.6,-1.04 -1.5,-1.04 -0.8,0 -1.4,0.44 -1.4,1.04 l 0.3,5.9 c 0,0.5 0.6,1 1.1,1 m 0,1.3 c -0.7,0 -1.3,0.6 -1.3,1.3 0,0.8 0.6,1.4 1.3,1.4 0.8,0 1.4,-0.6 1.4,-1.4 0,-0.7 -0.6,-1.3 -1.4,-1.3\" fill=\"#ffffff\" />',Bn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m 16.8,29.4 c 0,-1.1 -1.8,-2 -4,-2 -2.2,0 -4.01,0.9 -4.01,2 0,1.1 1.81,2 4.01,2 2.2,0 4,-0.9 4,-2\" style=\"fill:#878787\"/><path d=\"m 24.1,17.8 c 1.6,-1.6 1.6,-3.8 0,-5.7 L 15.8,1.9 C 15,0.998 14,0.498 12.9,0.498 11.8,0.498 10.7,1.1 10,1.9 L 1.7,12.1 c -1.6,1.9 -1.6,4.1 0,5.7 L 12.9,29 24.1,17.8 z\" stroke=\"#fff\" stroke-width=\"1\" fill=\"{{color}}\" />{{icon}}</svg>',\nGn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"13\" cy=\"15\" r=\"11\" fill=\"{{color}}\" stroke=\"#ffffff\" stroke-width=\"1\"/><rect x=\"6\" y=\"13\" width=\"14\" height=\"5\" fill=\"#ffffff\" /></svg>';function In(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");if(!(a instanceof tm))throw Error(\"IllegalArgument: service\");eh.call(this,{max:20,min:8,requestData:z(this.wa,this)});this.I=new An;this.P=a;this.b=c;this.j=z(this.j,this);this.U=setInterval(this.j,b||18E4)}v(In,eh);r(\"H.service.TrafficIncidentsProvider\",In);In.prototype.f={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nIn.prototype.wa=function(a,b,c,d,e){var f=this,g=this.f,h=this.I;return this.P.b(a,b,c,function(a){var b=[];a=a.TRAFFIC_ITEMS;var c,e,q,u;if(a)for(a=a.TRAFFIC_ITEM,u=a.length;u--;){c=a[u];e=c.TRAFFIC_ITEM_TYPE_DESC;switch(e){case \"ACCIDENT\":case \"CONGESTION\":q=e;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=h.rb(q,g[c.CRITICALITY.DESCRIPTION]);e=c.LOCATION.GEOLOC.ORIGIN;e=new xi({lat:e.LATITUDE,lng:e.LONGITUDE},{provider:f,icon:q});e.g(c);b.push(e)}d(b)},e,this.b)};\nIn.prototype.J=function(){eh.prototype.J.call(this);clearInterval(this.U)};function Jn(a){var b;if(a)for(this.a={},b=a.length;b--;)this.a[a[b]]=!0;this.gh={}}var Kn;Jn.prototype.a={};Jn.prototype.parse=function(a,b,c){var d,e,f,g,h,k;Kn=!1;try{c=xm.JSON.parse(c)}catch(l){Kn=!0}if(c&&(d=c.metadata))for(e in k={spatials:[]},d){if(c=!this.a[e]&&(f=Ln[e]))(g=d[e])||(Kn=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var m;(m=g[c])||(Kn=!0,m=void 0);(h=m)&&f(b,a,this,e,h,k)}}else Kn=!0;return Kn?void 0:k};r(\"H.service.metaInfo.Parser.prototype.parse\",Jn.prototype.parse);\nvar Ln={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(Kn=!0,g=void 0);if(g){var h=g.length,k,l,m;(l=0<h)||(Kn=!0,l=void 0);if(l)for(k=Array(h/2);h;)m=g[--h],l=g[--h],k[h/2]=new M(l,m);k=k?{Ra:[k]}:A;h=+e[\"font size\"]/a.Wb;g=c.gh[h];g||(Mn.lineWidth=h,g=c.gh[h]=c.hb.f(Mn));Nn(a,b,k,!1,g,e,d,f)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){Nn(a,b,On(e,new Sf([])),!0,c.hb,e,d,f)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(Kn=!0,g=void 0);if(g){for(var h=\ng.length,k=new Sf([]),l;h--;){var m;(m=g[h])||(Kn=!0,m=void 0);(l=m)&&On(l,k)}Nn(a,b,k,!0,c.hb,e,d,f)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.kc[g],k,l,m,n=[],q=[];(k=e)||(Kn=!0,k=void 0);if(k&&((l=k.vertices)||(Kn=!0,l=void 0),l)){var u;(u=k.polygons)||(Kn=!0,u=void 0);(m=u)&&n.push.apply(n,Pn(l,m));(k=k.outlines)||(Kn=!0,k=void 0);(m=k)&&q.push.apply(q,Pn(l,m))}m=n.length;n.push.apply(n,q);q=new Sf(n,Lb,m);(n=n.length)||(Kn=!0,n=void 0);n&&(h?(ln(h,a,[q]),f.spatials.push(h)):\n(h=Nn(a,b,q,!0,c.hb,e,d,f,g),b.V(h)))}};Ln[\"transit stops\"]=Ln.POIs=Ln.labels;var Qn=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function On(a,b){for(var c=Qn.length,d,e;c--;)if(d=Qn[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.Ra.push([new M(f,g),new M(f+h,g),new M(f+h,g+e),new M(f,g+e)]);delete a[d]}return b}\nfunction Pn(a,b){var c=b.length,d,e,f,g,h;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(Kn=!0,d=void 0),d&&(g=d.length,0<g))for(e[c]=f=Array(g);g--;)h=2*d[g],f[g]=new M(a[h],a[h+1]);return e||[]}var Rn={};function Nn(a,b,c,d,e,f,g,h,k){Rn.style=e;d=new gn(b,d,k,Rn);c&&ln(d,a,[c]);Sn(f);f.category=g;d.g(f);h.spatials.push(d);d.ia(b);return d}Jn.prototype.hb=new zf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Mn={};\nfunction Sn(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)Sn(a[b])?c=!0:delete a[b];else if(a)for(b in a)Sn(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Tn(a,b,c){c=c||{};b=b||{};var d=c.tileType||\"maptile\",e=c.$i||\"normal.day\";N.call(this,{min:0,max:20});!0===b.pois&&(b.pois=\"!F\");this.b=b;if(!(a&&a instanceof Un))throw Error(\"InvalidArgument: service required\");this.O=a;this.I=z(this.I,this);this.O.addEventListener(\"versionupdate\",this.I);this.f=a.aa().clone().R(d+\"/\"+a.Cb()+\"/\"+e).$(this.ea).$(b);this.Ua=a.g||null;this.wa=c.pixelRatio||c.pixelratio||1;this.tileSize=c.tileSize||256;this.tileType=d;this.scheme=e;this.C=new Pm(new Jn(c.categoryFilter));\nthis.C.ia(this);this.U=z(this.U,this);this.C.addEventListener(\"update\",this.U);N.call(this,{min:0,max:20});this.N(new Vg(c.tileCacheSize||256,z(this.Xa,this)))}v(Tn,N);r(\"H.service.metaInfo.TileProvider\",Tn);Tn.prototype.Xa=function(a,b){for(var c=b.a,d=c.length,e;d--;)e=c[d],delete e.Ic[b.key],e.v();b.data&&(Em.push(b.m(),this.tileSize),b.o())};Tn.prototype.U=function(){this.dispatchEvent(\"update\")};\nTn.prototype.c=function(a,b,c,d,e){var f=this.f.clone(),g=this.Ua,h=this.tileSize,k=this.getTileKey(a,b,c),k=this.g.get(k),l,m,n;k&&!k.xc()?(d(Em.pop(this.tileSize),null),l={cancel:function(){}}):(g&&f.xa(g[(c+b+a)%g.length]),f.R(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\"),m=xm.setTimeout(function(){n=(new Gh(\"text/plain\",f.toString())).then(function(a){d(null,a)},e)},500));return l||{cancel:function(){n?n.cancel():xm.clearTimeout(m)}}};Tn.prototype.requestInternal=Tn.prototype.c;\nTn.prototype.P=function(a,b,c,d,e){var f=this.C,g;g=d||Em.pop(this.tileSize);if(d)a=this.g.get(this.getTileKey(a,b,c)),a.ca(d);else if(d=a=new Xk(this.A(a,b,c),a,b,c,this.tileSize,this.wa,c+0,f),delete d.i,d.v=e,a.ca(g))for(e=a.a,g=e.length;g--;)e[g].Ib();else Em.push(g,this.tileSize);return a};Tn.prototype.createTileInternal=Tn.prototype.P;Tn.prototype.J=function(){this.C.J();this.O.removeEventListener(\"versionupdate\",this.I);N.prototype.J.call(this)};\nTn.prototype.I=function(){var a=this.O;this.f=a.aa().clone().R(this.tileType+\"/\"+a.Cb()+\"/\"+this.scheme).$(this.ea).$(this.b);this.j(!1)};Tn.prototype.ea={metadata:\"metaonly\",mgen:\"2\"};function Un(a){a=qm(rm.maptile,a||{});I.call(this);this.f=a.baseUrl;this.c=a.path;this.i=a.subDomain;this.g=a.shards;this.ra=(this.v=!!a.ignoreTypes)?null:a.type;this.b=a.version;this.o=new um}v(Un,I);r(\"H.service.metaInfo.Service\",Un);function Vn(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Un.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.i&&this.a.xa(this.i);this.ra&&this.a.xa(this.ra);this.c&&this.a.lc(this.c);\"newest\"===this.b&&Wn(this);return this};\nUn.prototype.configure=Un.prototype.W;Un.prototype.aa=function(){return this.a};Un.prototype.Cb=function(){return this.b};Un.prototype.getVersion=Un.prototype.Cb;Un.prototype.Ia=function(){return this.o};Un.prototype.getCopyrights=Un.prototype.Ia;\nfunction Wn(a){var b=a.aa().clone().R(\"info\").$({output:\"json\"});a.g&&b.xa(a.g[0]);nm({url:b,xd:\"callback_func\",nc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Vn(b,\"map\");Vn(b,\"scheme\");Vn(b,\"tiletype\");Vn(b,\"format\");Vn(b,\"resolution\");Vn(b,\"language\");if(\"newest\"===a.b&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.b=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Zc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+\nb.toString());},rf:!0})}Un.prototype.s=function(){return this.l};Un.prototype.getInfo=Un.prototype.s;Un.prototype.m=function(a,b,c,d,e,f){return new Tn(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c,tileType:e,scheme:f})};Un.prototype.createTileProvider=Un.prototype.m;Un.prototype.j=function(a,b,c,d,e,f){a=this.m(a,b,c,d,e,f);return new oh(a)};Un.prototype.createTileLayer=Un.prototype.j;\nT.prototype.j=function(a){var b;b=qm(rm.metainfotile,a||{});var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=wm(c);c=this.a[\"meta\"+b];c||(c=this.W(new Un(a)),this.a[\"meta\"+b]=c);return c};T.prototype.getMetaInfoService=T.prototype.j;rm.metainfotile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};T.prototype.F=function(a,b,c,d,e,f){var g=this.b(),h=this.b({type:\"aerial\"}),k=this.b({type:\"traffic\"}),l=this.b({type:\"pano\"}),m=this.j(),n=this.m(),q=this.o(),u={},t={crossOrigin:\"anonymous\"},y;\"object\"===typeof a&&(f=a,t.crossOrigin=\"crossOrigin\"in f?f.crossOrigin:\"anonymous\",a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);a=a||256;y=320===b?2:1;320===b&&(u.ppi=b);c&&(u.lg=c);d&&(u.lg2=d);e&&(u.style=e);f&&(u.pois=f);b=new In(n,void 0,c?u:null);this.U=new uh(b);return{normal:{xbase:g.b(\"xbasetile\",\n\"normal.day\",a,\"png8\",u,1,!1,t),xbasenight:g.b(\"xbasetile\",\"normal.night\",a,\"png8\",u,1,!1,t),base:g.b(\"basetile\",\"normal.day\",a,\"png8\",u,1,!1,t),basenight:g.b(\"basetile\",\"normal.night\",a,\"png8\",u,1,!1,t),map:g.b(\"maptile\",\"normal.day\",a,\"png8\",u,1,!1,t),mapnight:g.b(\"maptile\",\"normal.night\",a,\"png8\",u,1,!1,t),traffic:k.b(\"traffictile\",\"normal.day\",a,\"png8\",u,1,!1,t),trafficnight:k.b(\"traffictile\",\"normal.night\",a,\"png8\",u,1,!1,t),transit:g.b(\"maptile\",\"normal.day.transit\",a,\"png8\",u,1,!1,t),panorama:l.b(\"rctile\",\n\"normal.day\",a,\"png8\",u,1,!1,t),panoramanight:l.b(\"rctile\",\"normal.night\",a,\"png8\",u,1,!1,t),labels:g.b(\"labeltile\",\"normal.day\",a,\"png\",u,1,!1,t),metaInfo:m.j(a,y,[\"buildings\"],u)},satellite:{xbase:h.b(\"xbasetile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),base:h.b(\"basetile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),map:h.b(\"maptile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),traffic:k.b(\"traffictile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),panorama:l.b(\"rctile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),labels:h.b(\"labeltile\",\"hybrid.day\",a,\"png\",u,\n1,!0,t)},terrain:{xbase:h.b(\"xbasetile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),base:h.b(\"basetile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),map:h.b(\"maptile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),traffic:k.b(\"traffictile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),panorama:l.b(\"rctile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),labels:h.b(\"labeltile\",\"terrain.day\",a,\"png\",u,1,!1,t)},incidents:this.U,venues:q.i({tileSize:a,pixelRatio:y})}};T.prototype.createDefaultLayers=T.prototype.F;function Xn(a){a=qm(rm.routing,a);a.callbackKey=\"jsoncallback\";Xn.u.constructor.call(this,a)}v(Xn,om);r(\"H.service.RoutingService\",Xn);Xn.prototype.W=function(a,b,c,d,e){Xn.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};Xn.prototype.configure=Xn.prototype.W;Xn.prototype.g=function(a,b,c){a=this.aa().clone().R(\"calculateroute.json\").$(a);pm(this,a,b,c)};Xn.prototype.calculateRoute=Xn.prototype.g;\nXn.prototype.b=function(a,b,c){a=this.aa().clone().xa(\"isoline\").R(\"calculateisoline.json\").$(a);pm(this,a,b,c)};Xn.prototype.calculateIsoline=Xn.prototype.b;rm.routing={subDomain:\"route\",path:\"routing/7.2\"};T.prototype.O=function(a){return this.W(new Xn(a))};T.prototype.getRoutingService=T.prototype.O;function Yn(a){a=qm(rm.geocoding,a);a.callbackKey=\"jsoncallback\";Yn.u.constructor.call(this,a);this.b=a.reverseSubDomain}v(Yn,om);r(\"H.service.GeocodingService\",Yn);Yn.prototype.W=function(a,b,c,d,e){Yn.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};Yn.prototype.configure=Yn.prototype.W;Yn.prototype.g=function(a,b,c){a=this.aa().clone().R(\"geocode.json\").$(a);return pm(this,a,b,c)};Yn.prototype.geocode=Yn.prototype.g;\nYn.prototype.l=function(a,b,c){a=this.aa().clone().R(\"reversegeocode.json\").$(a);this.b&&a.xa(this.b);return pm(this,a,b,c)};Yn.prototype.reverseGeocode=Yn.prototype.l;Yn.prototype.i=function(a,b,c){a=this.aa().clone().R(\"search.json\").$(a);return pm(this,a,b,c)};Yn.prototype.search=Yn.prototype.i;rm.geocoding={subDomain:\"geocoder\",path:\"6.2\",reverseSubDomain:\"reverse\"};T.prototype.I=function(a){return this.W(new Yn(a))};T.prototype.getGeocodingService=T.prototype.I;function Zn(a){a=qm(rm.places,a);a.callbackKey=\"callback\";Zn.u.constructor.call(this,a)}v(Zn,om);r(\"H.service.PlacesService\",Zn);Zn.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Zn.prototype.b=function(a,b,c,d){b=b||{};a=this.aa().clone().R(a).$(b);return pm(this,a,c,d)};Zn.prototype.request=Zn.prototype.b;Zn.prototype.o=function(a,b,c){return this.b(\"discover/search\",a,b,c)};\nZn.prototype.search=Zn.prototype.o;Zn.prototype.v=function(a,b,c){return this.b(\"suggest\",a,b,c)};Zn.prototype.suggest=Zn.prototype.v;Zn.prototype.l=function(a,b,c){return this.b(\"discover/explore\",a,b,c)};Zn.prototype.explore=Zn.prototype.l;Zn.prototype.g=function(a,b,c){return this.b(\"discover/around\",a,b,c)};Zn.prototype.around=Zn.prototype.g;Zn.prototype.j=function(a,b,c){return this.b(\"discover/here\",a,b,c)};Zn.prototype.here=Zn.prototype.j;\nZn.prototype.i=function(a,b,c){return this.b(\"categories/places\",a,b,c)};Zn.prototype.categories=Zn.prototype.i;Zn.prototype.m=function(a,b,c,d){a=jm(a);d&&a.$(d);return pm(this,a,b,c)};Zn.prototype.follow=Zn.prototype.m;rm.places={subDomain:\"places\",path:\"places/v1\"};T.prototype.P=function(){return this.W(new Zn)};T.prototype.getPlacesService=T.prototype.P;function $n(a){a=qm(rm.enterpriseRouting,a);a.callbackKey=\"jsoncallback\";if(!B(a.baseUrl,S))throw new C($n,0,\"Invalid base url\");this.i=a;$n.u.constructor.call(this,a)}v($n,om);r(\"H.service.EnterpriseRoutingService\",$n);$n.prototype.j=function(a,b,c){a=this.aa().clone().R(\"calculateroute.json\").$(a);pm(this,a,b,c)};$n.prototype.calculateRoute=$n.prototype.j;$n.prototype.g=function(a,b,c){a=this.aa().clone().R(\"getroute.json\").$(a);pm(this,a,b,c)};$n.prototype.getRoute=$n.prototype.g;\n$n.prototype.b=function(a,b,c){a=this.aa().clone().R(\"getlinkinfo.json\").$(a);pm(this,a,b,c)};$n.prototype.getLinkInfo=$n.prototype.b;$n.prototype.l=function(a,b,c){a=this.aa().clone().R(\"calculateisoline.json\").$(a);pm(this,a,b,c)};$n.prototype.calculateIsoline=$n.prototype.l;$n.prototype.W=function(a,b,c,d,e){var f,g=rm.enterpriseRouting;this.i.baseUrl===g.baseUrl&&e&&(f=e.clone(),f.nd(g.host||g.baseUrl.uc),d&&f.xa(g.citSubDomain));return om.prototype.W.apply(this,[a,b,c,d,f])};\n$n.prototype.configure=$n.prototype.W;var ao={subDomain:\"route\",path:\"routing/6.2\",baseUrl:new S(\"http\",\"nlp.nokia.com\"),host:\"nlp.nokia.com\",citSubDomain:\"st\"};rm.enterpriseRouting=ao;T.prototype.K=function(a){return this.W(new $n(a))};T.prototype.getEnterpriseRoutingService=T.prototype.K;function bo(){}r(\"H.service.extension.dataView.ITable\",bo);bo.prototype.getMeta=bo.prototype.cd;bo.prototype.getRowCount=bo.prototype.g;bo.prototype.getRow=bo.prototype.Qb;bo.prototype.getColumnNames=bo.prototype.c;bo.prototype.getColumn=bo.prototype.l;bo.prototype.getCell=bo.prototype.f;bo.prototype.concat=bo.prototype.concat;function co(){}r(\"H.service.extension.dataView.IRow\",co);co.prototype.getColumnNames=co.prototype.c;co.prototype.getCell=co.prototype.a;co.prototype.getTable=co.prototype.tc;function eo(a,b){this.b=a;this.f=b}r(\"H.service.extension.dataView.ObjRow\",eo);eo.prototype.c=function(){return this.b.c()};eo.prototype.getColumnNames=eo.prototype.c;eo.prototype.a=function(a){return this.b.f(this.f,a)};eo.prototype.getCell=eo.prototype.a;eo.prototype.tc=function(){return this.b};eo.prototype.getTable=eo.prototype.tc;function fo(){}r(\"H.service.extension.dataView.IColumn\",fo);fo.prototype.getCell=fo.prototype.a;function go(a,b){this.c=a;this.b=b}r(\"H.service.extension.dataView.ObjColumn\",go);go.prototype.a=function(a){return this.c.f(a,this.b)};go.prototype.getCell=go.prototype.a;function ho(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):A);this.cb=a;if(b)for(this.pc=b,this.we=a=Ka(),d=b.length;d--;)a[b[d]]=!0;c!==A&&(this.cf=c)}r(\"H.service.extension.dataView.ObjTable\",ho);p=ho.prototype;p.cf=A;p.cb=A;p.pc=A;p.we=A;p.cd=function(){return this.cf};ho.prototype.getMeta=ho.prototype.cd;ho.prototype.g=function(){return this.cb?this.cb.length:0};ho.prototype.getRowCount=ho.prototype.g;ho.prototype.Qb=function(a){var b=this.cb;return b&&b[a]?new eo(this,a):A};\nho.prototype.getRow=ho.prototype.Qb;ho.prototype.c=function(){return this.pc||De};ho.prototype.getColumnNames=ho.prototype.c;ho.prototype.l=function(a){return this.we[a]?new go(this,a):A};ho.prototype.getColumn=ho.prototype.l;ho.prototype.f=function(a,b){var c=this.cb;return(c=c&&this.we[b]&&c[a])&&c[b]};ho.prototype.getCell=ho.prototype.f;\nho.prototype.concat=function(){var a=arguments.length,b,c=this.pc,d=\"\"+this.pc,e=(this.cb||[]).slice(),f;for(b=0;b<a;b++){f=arguments[b];if(!(f instanceof ho))throw new C(this.concat,b);if(f.cb){if(c&&\"\"+f.pc!==d)throw new C(this.concat,b,\"Incompatible columns!\");e=e.concat(f.cb)}}return new ho(e,this.pc,this.cf)};ho.prototype.concat=ho.prototype.concat;function io(a,b){a.cb?a.cb.push(b):a.cb=[b];return a.cb.length-1};function jo(a,b,c,d){if(!a||!ra(we(a.layerId,a.layer))||!ab(a.level)||Ta(a.rowFilter)&&!sa(a.rowFilter)||Ta(a.rowFilterContext)&&!Pa(a.rowFilterContext))throw new C(b,c,Ta(d)?d:a);};function ko(a,b,c){var d;B(a,lo,ko,0,\"has invalid type\");B(b,G,ko,1,\"has invalid type\");if(!Za(c))throw new C(ko,2,\"has invalid type\");for(d=0;d<c.length;d++)jo(c[d],ko,2,\"has invalid type\");ko.u.constructor.call(this);this.a=b;this.b=c;(new Lh).md(mo,\"H.service.extension.worker.processor\");a=a.aa().clone().R(no+\".\"+oo).$({meta:\"1\"});new Nh(mo,{message:[po,0,{serverUrl:a.toString()}]})}v(ko,I);r(\"H.service.extension.platformData.SearchRequest\",ko);\nko.prototype.send=function(){var a=mo,b=po,c=[],d,e,f,g=this;for(f=0;f<this.b.length;f++)d=this.b[f],c.push({layerId:we(d.layerId,d.layer),level:d.level,rowFilter:Ta(d.rowFilter)?d.rowFilter+\"\":A,rowFilterContext:d.rowFilterContext,columns:d.columns});e=[this.a.ka,this.a.ga,this.a.ja,this.a.ha,c];this.c=w.setTimeout(function(){(new Nh(a,{message:[b,2,e]})).then(z(qo,g),z(ro,g))},1)};ko.prototype.send=ko.prototype.send;ko.prototype.cancel=function(){w.clearTimeout(this.c)};ko.prototype.cancel=ko.prototype.cancel;\nfunction qo(a){var b,c;for(c=0;c<a.length;c++){b=a[c].Rows;for(var d=b.length,e=void 0;d--;)e=b[d],e.geometry&&(e.geometry=[e.geometry.path]);b=new ho(b,null,a[c].Meta);this.dispatchEvent(new Cc(\"data\",b))}this.dispatchEvent(new Bc(\"end\"))}function ro(a){this.dispatchEvent(new Dc(\"error\",a))}var mo=\"pde\",po=\"pdeSearchRequestProvider\";function so(a,b,c){var d=to,e=a===d.POLYGON,f=a===d.POLYLINE;this.b=b;this.c=c||sc;(this.a=f||e)?this.l=e:this.g=a===d.MARKER;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nso.prototype.parse=function(a,b,c){var d,e,f,g,h,k={},l=[],m,n,q,u;m=0;for(n=c.length;m<n;m++)if(d=c[m],q=d.Rows,d=q.length)for(e=Object.keys(q[0]).filter(function(a){return\"geometry\"!==a&&\"$HProjGeometry\"!==a}),e=new ho(q,e),u=0;u<d;u++)if(f=q[u],h=f[this.f]){if(delete f[this.f],f=e.Qb(u))try{this.a?g=uo(this,a,b,f,h):g=vo(this,a,f,h.path),g.ia(a),l.push(g)}catch(t){this.c(t.message)}}else this.c(\"Layer must contain geometries\");k[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=l;return k};\nfunction uo(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new gn(b,a.l,A,{style:l||a.i,data:d});k!==h;)f.push(wo(g[k++]));ln(a,c,[new Sf(f,e.interiorsIndex,e.outlinesIndex)]);return a}function vo(a,b,c,d){d=new gc(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new xi(d,a)):(a={icon:e,data:c,provider:b},a=new fh(d,a));return a}function wo(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new M(a[b++],a[b++]));return d};function xo(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback,e=to;Ta(a.min)||(a.min=12);xo.u.constructor.call(this,a);if(-1===yo.indexOf(c))throw new C(xo,2,\"invalid resultType\");this.b=c;if(d&&!sa(d))throw new C(xo,2,\"invalid style callback\");this.ea=d;this.U=a.pixelRatio||1;this.f=z(this.f,this);this.N(new Vg(b,z(this.ei,this)));this.createTileInternal=c===e.POLYLINE||c===e.POLYGON?z(this.Mh,this):z(this.Lh,this)}v(xo,N);r(\"H.service.extension.TileProvider\",xo);\nxo.prototype.I=!1;var zo=ri.prototype.Pc.READY;xo.prototype.m=function(a,b,c,d){return this.I?xo.u.m.call(this,a,b,c,d):A};xo.prototype.requestTile=xo.prototype.m;xo.prototype.f=function(a){a=ra(a)?a:a+\"\";this.dispatchEvent(new Dc(\"error\",a,this))};xo.prototype.l=function(){return this.b===to.MARKER};xo.prototype.providesMarkers=xo.prototype.l;xo.prototype.i=function(){return this.b===to.DOM_MARKER};xo.prototype.providesDomMarkers=xo.prototype.i;\nxo.prototype.s=function(){return this.b===to.POLYLINE||this.b===to.POLYGON};xo.prototype.providesSpatials=xo.prototype.s;function Ao(a){a.C||(a.O||(a.O=a.P(a.b,a.ea,a.f)),a.C=new Pm(a.O),a.C.ia(a),a.C.addEventListener(a.F.la,z(a.di,a)),a.C.P=!0);return a.C}p=xo.prototype;\np.Lh=function(a,b,c,d){var e=this.getTileKey(a,b,c),e=this.g.get(e),f=this.b==to.DOM_MARKER,g=[],h=Ao(this);e?e.valid=!0:(a=e=new $g(a,b,c,x),delete a.i,a.v=d);d=f?Tm(h,e,\"domMarkers\"):Tm(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.If=e,(f||a.rb().getState()===zo)&&g.push(a);e.data=g;return e};p.di=function(a){if(a=a.target.If)a.valid=!1};\np.Mh=function(a,b,c,d){var e=Ao(this),f,g=this.getTileKey(a,b,c),h=this.g.get(g);f=Em.pop(this.tileSize);h||(a=h=new Xk(g,a,b,c,this.tileSize,this.U,c,e),delete a.i,a.v=d);h.ca(f)||Em.push(f,this.tileSize);return h};p.ei=function(a,b){var c,d;c=to;if(this.b===c.POLYLINE||this.b===c.POLYGON){c=b.a;for(d=c.length;d--;)delete c[d].Ic[b.key];b.data&&(Em.push(b.m(),this.tileSize),b.o())}else for(c=b.data,d=c.length;d--;)delete c[d].If};p.D=function(){xo.u.D.call(this);Ao(this).J()};\nvar to={MARKER:0,DOM_MARKER:1,POLYLINE:2,POLYGON:3};xo.ResultType=to;var yo=[to.MARKER,to.DOM_MARKER,to.POLYLINE,to.POLYGON];function Co(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType,g=to;Co.u.constructor.call(this,c);B(a,lo,Co,0);jo(b,Co,1,\"invalid layer config\");e?(c=Qa(b),c.rowFilter=e.toString()):c=Qa(b);delete c.layer;c.layerId=we(b.layerId,b.layer);(new Lh).md(\"pde\",\"H.service.extension.worker.processor\");a=a.aa().clone().R(no+\".\"+oo).$({meta:1});(new Nh(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:f===g.POLYLINE,serverUrl:a.toString(),layerConfigs:[c]}]})).then(function(){d.I=\n!0;Rg(d)},this.f)}v(Co,xo);r(\"H.service.extension.platformData.TileProvider\",Co);Co.prototype.P=function(a,b,c){a=new so(a,b,c);a.i=Do;return a};var Do=new zf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nCo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:sc},l=!0,m,n=to;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.xc()||(d(Em.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=xm.setTimeout(function(){h=new Nh(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():xm.clearTimeout(m)});return k};Co.prototype.requestInternal=Co.prototype.c;Co.prototype.D=function(){Co.u.D.call(this);new Nh(\"pde\",{message:[this.uid,3]})};\nCo.ResultType=to;function Eo(a,b,c,d,e,f){Fo(Eo,1,b,c);Fo(Eo,2,d,e);(this.f=a.length)?(this.o=a,this.m=b,this.i=c,this.b=0,this.c=z(this.c,this),this.j=d,this.l=e,this.a=Ka(),Ca(this.a,Go,f||{}),this.g={},w.setTimeout(this.c,0)):b(De,!0)}var Go={duration:100,Xh:\"geometry\",Wh:\"WKT\",zi:\"searchAttributes\",bg:A};\nEo.prototype.c=function(){var a,b,c,d=[];a=!1;for(var e=tj(),f;this.b<this.f;){b=this.o[this.b];a=b.attributes;f=b.layerId||this.a.bg;b.distance&&(a[this.a.zi]={nearest:new gc(b.nearestLat,b.nearestLon),distance:b.distance});if(b=b[this.a.Xh]){try{c=ug(new Pg(b))}catch(g){this.i(new w.Error(g.message));a=!0;break}a[this.a.Wh]=c}(b=this.g[f])||(b=this.g[f]=this.j({layerId:f,columnNames:Object.keys(a)}));a=this.l(b,a);d.push(a);this.b++;if((a=this.b===this.f)||tj()-e>=this.a.duration){this.m(d,a);break}}a?\nthis.g=x:this.fe=w.setTimeout(this.c,0)};Eo.prototype.cancel=function(){w.clearTimeout(this.fe);this.b<this.f&&this.i(new w.Error(\"parsing canceled\"))};r(\"H.service.extension.util.AsyncParser.prototype.cancel\",Eo.prototype.cancel);function Ho(a){this.a=a}Ho.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function Fo(a,b,c,d){if(!sa(c))throw new C(a,b,\"has invalid type\");if(!sa(d))throw new C(a,b+1,\"has invalid type\");};function lo(a){a=qm(rm.pde,a||{});lo.u.constructor.call(this,a)}v(lo,om);r(\"H.service.extension.platformData.Service\",lo);\nlo.prototype.b=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);if(!d)throw new C(this.b,3,d);if(!e)throw new C(this.b,4,e);a=this.aa().clone().R(a+\".\"+b).$(c);b===Io.JSON&&(f=\"application/json\");b=new Gh(f,a.toString());b.then(d,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.message)},function(){e(a.statusText)})});return b};lo.prototype.request=lo.prototype.b;\nrm.pde={subDomain:\"pde\",path:\"1\"};var no=\"tiles\";lo.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:no,FILE:\"file\",INDEX:\"index\"};var oo=\"json\",Io={TXT:\"txt\",JSON:oo,HTML:\"html\",BIN:\"bin\"};\nlo.EntryPointType=Io;lo.prototype.j=function(a,b){var c=b&&b.resultType,d=new Co(this,a,b),e,f=to;c==f.MARKER||c===f.DOM_MARKER?e=new uh(d):e=new oh(d);return e};lo.prototype.createTileLayer=lo.prototype.j;function Jo(a,b,c,d,e){var f=[],g,h=c.layer_id||c.layer_ids;a=a.b(b,oo,c,function(a){g=new Eo(a.geometries,d,e,function(a){return new ho([],a.columnNames,a)},function(a,b){return a.Qb(io(a,b))},{bg:h});f.push(g)},function(a){e(new w.Error(a))});f.push(a);return new Ho(f)}\nfunction Ko(a,b,c){if(!Za(a))throw new C(c,0,\"has invalid type\");if(!Za(b))throw new C(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new C(c,1,\"specify one key attribute for each given layer id in the same order\");}\nlo.prototype.l=function(a,b,c,d,e,f){function g(a,b){b&&h--;d(a,!h)}var h,k=[];Ko(a,b,this.l);Fo(this.l,3,d,e);B(c,G,this.l,2);c={bbox:c.ka+\",\"+c.ga+\";\"+c.ja+\",\"+c.ha};f&&Ca(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(Jo(this,\"search/bbox\",c,g,e));return new Ho(k)};lo.prototype.searchByBoundingBox=lo.prototype.l;\nlo.prototype.i=function(a,b,c,d,e,f,g){Ko(a,b,this.i);B(c,gc,this.i,1,\"has invalid type\");if(!ab(d))throw new C(this.i,2,\"has invalid type\");Fo(this.i,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Ca(a,g);return Jo(this,\"search/proximity\",a,e,f)};lo.prototype.searchByProximity=lo.prototype.i;\nlo.prototype.g=function(a,b,c,d,e,f,g){var h=\"\";Ko(a,b,this.g);if(!ra(c)&&!B(c,F))throw new C(this.g,1,\"has invalid type\");if(!ab(d))throw new C(this.g,2,\"has invalid type\");Fo(this.g,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(ra(c))a.route_id=c;else{d=c.na;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Ca(a,g);return Jo(this,\"search/corridor\",a,e,f)};lo.prototype.searchByCorridor=lo.prototype.g;\nT.prototype.T=function(a){var b;b=qm(rm.pde,a||{});var c;c=\"\"+(b.path||\"\");c+=b.subDomain||\"\";c+=b.baseUrl?b.baseUrl.toString():\"\";b=wm(c);c=this.a[\"pde\"+b];c||(c=this.W(new lo(a)),this.a[\"pde\"+b]=c);return c};T.prototype.getPlatformDataService=T.prototype.T;function Lo(a){a=qm(rm.gfe,a);Lo.u.constructor.call(this,a)}v(Lo,om);r(\"H.service.extension.geofencing.Service\",Lo);rm.gfe={subDomain:\"gfe\",path:\"2\"};T.prototype.ob=function(a){return this.W(new Lo(a))};T.prototype.getGeofencingService=T.prototype.ob;Lo.prototype.W=function(a,b,c,d,e){Lo.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};Lo.prototype.configure=Lo.prototype.W;\nLo.prototype.b=function(a,b,c,d){var e;if(!a)throw new C(this.b,0,a);if(!sa(c))throw new TypeError(\"onResult must be a function\");if(!sa(d))throw new TypeError(\"onError must be a function\");e=function(a){d(new w.Error(a))};a=this.aa().clone().R(a+\".json\").$(b);a=new Gh(\"application/json\",a.toString());a.then(c,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.issues[0].message)},e)});return a};Lo.prototype.request=Lo.prototype.b;\nLo.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};r(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});r(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function Mo(){if(No)throw new kc(Mo);}r(\"H.service.extension.customLocation.Table\",Mo);var No=!0;function Oo(a,b){var c,d,e,f;No=!1;c=new Mo;No=!0;c.j=Oa(w.JSON.parse(w.JSON.stringify(a)));d=a.columnNames;e=Ka();for(f=d.length;f--;)e[d[f]]=f;c.m=e;c.b=d.length;if(e=b){if(e.length%d.length)throw new C(Oo,1,\"Invalid number of cells\");}else e=[];c.a=e;return c}Mo.prototype.cd=function(){return this.j};Mo.prototype.getMeta=Mo.prototype.cd;Mo.prototype.g=function(){return this.a.length/this.b};\nMo.prototype.getRowCount=Mo.prototype.g;Mo.prototype.Qb=function(a){return a<this.a.length/this.b?new Po(this,a):A};Mo.prototype.getRow=Mo.prototype.Qb;Mo.prototype.v=function(){var a=this.a.length/this.b,b,c=new w.Array(a);for(b=0;b<a;b++)c[b]=new Po(this,b);return c};Mo.prototype.getRows=Mo.prototype.v;Mo.prototype.qe=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new C(this.qe,0,\"Invalid number of cells\");this.a=c.concat(a);return d};Mo.prototype.addCells=Mo.prototype.qe;\nMo.prototype.o=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(x);return this.Qb(c)};Mo.prototype.addRow=Mo.prototype.o;Mo.prototype.c=function(){return this.j.columnNames};Mo.prototype.getColumnNames=Mo.prototype.c;Mo.prototype.l=function(a){return this.m[a]===A?A:new Qo(this,a)};Mo.prototype.getColumn=Mo.prototype.l;Mo.prototype.f=function(a,b){return this.a[a*this.b+this.m[b]]};Mo.prototype.getCell=Mo.prototype.f;\nMo.prototype.i=function(a,b,c){b=this.m[b];if(a>=this.a.length/this.b)throw new C(this.i,0,\"Row index out of bounds\");if(b===A)throw new C(this.i,0,\"Column unknown\");this.a[a*this.b+b]=c};Mo.prototype.setCell=Mo.prototype.i;\nMo.prototype.concat=function(){var a=arguments.length,b,c=\"\"+this.c(),d=this.a?this.a.slice():[],e;for(b=0;b<a;b++){e=arguments[b];if(!(e instanceof Mo))throw new C(this.concat,b);if(\"\"+e.c()!==c)throw new C(this.concat,b,\"Incompatible columns!\");e.a&&(d=d.concat(e.a))}return Oo(this.j,d)};Mo.prototype.concat=Mo.prototype.concat;var Ro=/(\\n|\\t|\\r|\")/;\nMo.prototype.Df=function(a,b){var c,d=this.b,e=this.c(),f=[],g,h=[],k=this.a,l=-1,m;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(l=f.length),f.push(c);if(!(g=f.length))throw new C(this.Df,1,\"No columns filtered\");So(this,h,e,0,d,f,g,l);if(b)for(m=b.length,c=0;c<m;c++)h.push(\"\\n\"),e=b[c],So(this,h,k,e,d,f,g,l);else for(m=this.g(),e=0;e<m;e++)h.push(\"\\n\"),So(this,h,k,e,d,f,g,l);return h.join(\"\")};\nfunction So(a,b,c,d,e,f,g,h){var k,l;for(k=0;k<g;k++)if(k&&b.push(\"\\t\"),l=c[d*e+f[k]],k!==h){if(l!==x){l=String(l);if(Ro.test(l))throw new C(a.Df,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.j.columnNames[f[k]]);b.push(l)}}else b.push(l)}function Qo(a,b){this.c=a;this.b=b}Mo.Column=Qo;Qo.prototype.a=function(a){return this.c.f(a,this.b)};Qo.prototype.getCell=Qo.prototype.a;Qo.prototype.f=function(a,b){this.c.i(a,this.b,b)};Qo.prototype.setCell=Qo.prototype.f;\nfunction Po(a,b){this.b=a;this.Ve=b}Mo.Row=Po;Po.prototype.c=function(){return this.b.c()};Po.prototype.getColumnNames=Po.prototype.c;Po.prototype.a=function(a){return this.b.f(this.Ve,a)};Po.prototype.getCell=Po.prototype.a;Po.prototype.f=function(a,b){this.b.i(this.Ve,a,b)};Po.prototype.setCell=Po.prototype.f;Po.prototype.tc=function(){return this.b};Po.prototype.getTable=Po.prototype.tc;function To(a){var b=Uo;if(!a||!ra(a.layerId)||Ta(a.rowFilter)&&!sa(a.rowFilter)||Ta(a.rowFilterContext)&&!Pa(a.rowFilterContext))throw new C(b,1,Ta(\"invalid layer config\")?\"invalid layer config\":a);}function Vo(a){return ra(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function Wo(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=Vo(a[b]);return c}\nfunction Xo(a,b){var c=\"\",d,e,f,g,h,k=[];if(!b){g={};k=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)f=a.geometries[e],g[f.layerId]||(g[f.layerId]=[]),g[f.layerId].push(f);for(d in g)k.push({layerId:d,geometries:g[d]});for(d=0;d<k.length;d++)c+=Xo(k[d],k[d].layerId)}else if(a.geometries&&a.geometries.length)for(h=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+h.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){g=a.geometries[d].attributes;f=a.geometries[d].geometry;for(e=\n0;e<h.length;e++)k.push(g[h[e]]);c+=k.join(\"\\t\");c+=\"\\t\"+f+\"\\n\";k=[]}return c};function Yo(a){if(a===A)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new C(Yo,0);this.b=String(a).charCodeAt(0);this.We=z(this.We,this);this.G=Zo}var Zo=0;p=Yo.prototype;p.getState=function(){return this.G};function $o(a,b,c){var d=a.G;if(d!==b)throw 1===d&&(a.G=Zo),new kc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.We=function(a){this.G=Zo;throw new C(Yo.prototype.parse,0,\"Malformed DSV at row \"+this.a.m+\" column \"+this.a.c+\": \"+a);};\nfunction ap(a,b){var c=[];a.parse(b,function(a,b,f){1>a&&(c[b]=f);return 0<a});a.G=Zo;return c}p.parse=function(a,b,c){$o(this,Zo,Yo.prototype.parse);a=a.trim();this.a=new bp(a,this.b,this.We);this.c=b;this.Eg=c||Ce;this.G=2;this.wf()};p.Eg=Ce;\np.wf=function(){var a=this.a,b,c,d=[],e,f,g;$o(this,2,Yo.prototype.wf);this.G=1;do{if(!a.B){this.G=Zo;break}if(c>a.c){if(void 0!==f&&f!==c){this.a.b(\"The number of columns must be the same for all rows\");return}f=c}b=a.m;c=a.c;e=a.g;g=this.Eg(b,c,a);if(a.g>e)for(;-1!==a.next(););else{for(;-1!==(e=a.next());)d.push(e);g=String.fromCharCode.apply(x,d);d.length=0}cp(a);this.c(b,c,g)&&(this.G=2)}while(1===this.G);2!=this.G&&void 0!==f&&0<c&&f!==c&&this.a.b(\"The number of columns must be the same for all rows\")};\nfunction bp(a,b,c){this.f=new Pg(a);this.v=b;this.B=!0;this.g=this.m=this.c=0;cp(this);this.b=c;this.i=[];this.j=!1}bp.prototype.g=0;var dp={me:10,Of:13,oe:34,Mc:-1};function cp(a){var b=a.f.a();a.s=!1;(a.A=34===b)&&a.f.next()}function ep(a,b){var c=a.f;a.s=!0;switch(b){case a.v:a.c++;break;case dp.Of:c.next(),c.a()!==dp.me&&a.b(\"CR without LF\");case dp.me:a.c=0;a.m++;break;case dp.Mc:a.B=!1;break;default:a.b(\"End of field expected\")}c.next();return dp.Mc}\nbp.prototype.a=function(){var a,b;if(this.s)b=dp.Mc;else if(a=this.f,b=a.a(),this.A)switch(b){case dp.oe:a.next();b=a.a();b!==dp.oe&&(b=ep(this,b));break;case dp.Mc:this.b(\"Closing quotation mark expected\")}else switch(b){case dp.oe:this.b(\"Unexpected quotation mark\");case this.v:case dp.Of:case dp.me:case dp.Mc:b=ep(this,b)}return b};bp.prototype.o=function(){this.j=!0;this.i=[]};bp.prototype.l=function(){var a=this.i.slice();this.j=!1;this.i=[];return a};\nbp.prototype.next=function(){var a=this.a();-1!==a&&this.f.next();this.j&&this.i.push(a);this.g++;return a};function fp(a,b,c,d){d=d||{};if(!b)throw new C(fp,1,\"has to be a function\");if(!c)throw new C(fp,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||gp;this.b=z(this.b,this);this.f={};var e;a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++)d=a[b].split(\"\\n\"),c=d[0].split(\"\\t\")[0],d=d.slice(1).join(\"\\n\"),this.rc[c]=new Yo,this.Ke[c]=ap(this.rc[c],d),e={layerId:c,columnNames:this.Ke[c]},this.Ne.push(c),this.f[c]=Oo(e),this.Kb[c]=tj(),hp(this,d,c),this.b(c)}var gp=100;p=fp.prototype;\np.Ke={};p.Ne=[];p.rc={};p.Kb={};p.Ue={};function hp(a,b,c){var d=[],e=a.Ke[c].length-1,f=a.f[c];try{a.rc[c].parse(b,function(b,g,l){var m=!1;0<b&&(d[g]=l,g===e&&(a.a.push(f.Qb(f.qe(d))),tj()-a.Kb[c]>a.i&&(m=!0)));return m},function(a,b,c){if(0<a&&b===e)return ug(c)})}catch(g){a.g(g)}}p.cancel=function(){for(var a in this.Ue)w.clearTimeout(this.Ue[a])};r(\"H.service.extension.customLocation.AsyncParser.prototype.cancel\",fp.prototype.cancel);\nfp.prototype.b=function(a){var b=this,c;this.Ue[a]=w.setTimeout(function(){if(2===b.rc[a].getState())b.Kb[a]=tj(),b.c(b.a,!1),b.a=[],b.rc[a].wf(),b.b(a);else{c=!0;for(var d=0;d<b.Ne.length;d++)if(b.rc[b.Ne[d]].getState()!==Zo){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function U(a){a=qm(rm.cle,a);U.u.constructor.call(this,a)}v(U,om);r(\"H.service.extension.customLocation.Service\",U);U.prototype.W=function(a,b,c,d,e){U.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};U.prototype.configure=U.prototype.W;U.prototype.Ta=function(a,b){var c=b&&b.resultType,d=new Uo(this,a,b),e,f=to;c==f.MARKER||c===f.DOM_MARKER?e=new uh(d):e=new oh(d);return e};U.prototype.createTileLayer=U.prototype.Ta;T.prototype.N=function(a){return this.W(new U(a))};\nT.prototype.getCustomLocationService=T.prototype.N;function ip(a,b,c,d){var e;a=a===jp?\"changes\":\"file\";var f=b[a],g=ra(f),h=!g&&B(f,Blob);if(!g&&!h)throw new C(d,0,\"Invalid \"+a+\" parameter\");if(kp)h?e=f:e=Ke(f,\"text/plain\"),d=new w.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new C(d,0,\"Sending Blob data is not supported by the browser\");}var kp=w.FormData&&!!w.FormData.prototype.append;\nU.prototype.b=function(a,b,c,d,e){function f(a){e(new w.Error(a))}var g=\"text/plain\",h=lp,k=a===h.LAYERS_UPLOAD||a===h.LAYERS_MODIFY||a===h.LAYERS_IMPORT,l=c,h={data:A,method:\"GET\"};if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);Fo(this.b,3,d,e);k&&(B(c,Object,this.b,2,\"Invalid request parameters\"),l=Qa(c),ip(a,l,h,this.b));a=this.aa().clone().R(a+\".\"+b).$(l);b===mp.JSON&&(g=\"application/json\");b=new Gh(g,a.toString(),ud,h);b.then(function(a){var b=a.issues;b&&a.error_id&&a.response_code?\nf(b[0].message):d(a)},function(a){\"error\"===a.type||404===a.status?f(a.statusText||\"Unable to load data\"):a.json().then(function(a){f(a.error_description||a.issues[0].message)},f)});return b};U.prototype.request=U.prototype.b;\nvar jp=\"layers/modify\",lp={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:\"layers/list\",LAYERS_MODIFY:jp,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:\"tiled/tile\"};U.EntryPoint=lp;var mp={TXT:\"txt\",JSON:\"json\"};U.EntryPointType=mp;rm.cle={subDomain:\"cle\",path:\"2\"};\nU.prototype.l=function(a,b,c){var d=this;return this.b(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.b(\"layers/list\",\"json\",{layer_id:a,detail_level:\"all\"},function(a){a=a.layers[0];a.columnNames=f;b(Oo(a))},c)},c)};U.prototype.getLayer=U.prototype.l;\nU.prototype.A=function(a,b,c,d){function e(){return++g<f?h.b(\"layers/access/grant\",\"json\",{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.l(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};U.prototype.grantAccess=U.prototype.A;U.prototype.s=function(a,b,c){return this.b(\"layers/delete\",\"json\",{layer_ids:a},b,c)};U.prototype.deleteLayer=U.prototype.s;\nU.prototype.v=function(a,b,c){function d(){setTimeout(function(){l.l(h,function(a){setTimeout(e.bind(null,a),n)},function(){64E3>m?(m+=n,d()):c(w.Error(\"Timeout\"))})},n);n*=2}function e(d){var e=JSON.stringify(d.c()),f=a.grants,g;e!==JSON.stringify(k)?(g=\"Results into different column names on the backend: \"+e,setTimeout(function(){l.s(h,function(){c(w.Error(g))},function(a){c(w.Error(g+\". \"+a.message))})},n)):f&&f.length?l.A(h,f,b,c):b(d)}var f,g,h,k,l=this,m=0,n=1E3;g=!a||!Vo(h=a.layerId)&&(f=\"layerId\")||\n!Wo(k=a.columnNames)&&(f=\"columnNames\")?0:sa(b)?sa(c)?-1:2:1;if(0<=g)throw new C(l.v,g,f||arguments[g]);return l.l(h,function(){c(w.Error(\"Layer exists already\"))},function(){var b={layer_id:h,file:k.join(\"\\t\")},e=a.level,f=a.storage;e!==A&&(b.level=e);f!==A&&(b.storage=f);l.b(\"layers/upload\",\"json\",b,d,c)})};U.prototype.createLayer=U.prototype.v;\nfunction np(a,b,c,d,e){var f=[],g;a=a.b(b,\"json\",c,function(a){a.geometries.length?(a=Xo(a,c.layer_id),g=new fp(a,d,e),f.push(g)):d(De,!0)},e);f.push(a);return new Ho(f)}U.prototype.i=function(a,b,c,d,e,f){if(!Za(a))throw new C(this.i,0,\"has invalid type\");B(b,gc,this.i,1,\"has invalid type\");if(!ab(c))throw new C(this.i,2,\"has invalid type\");Fo(this.i,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Ca(a,f);return np(this,\"search/proximity\",a,d,e)};\nU.prototype.searchByProximity=U.prototype.i;U.prototype.g=function(a,b,c,d,e,f){var g,h=\"\";if(!Za(a))throw new C(this.g,0,\"has invalid type\");if(!ra(b)&&!B(b,F))throw new C(this.g,1,\"has invalid type\");if(!ab(c))throw new C(this.g,2,\"has invalid type\");Fo(this.g,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(ra(b))a.route_id=b;else{g=b.na;b=0;for(c=g.length;b<c;b+=3)h+=g[b]+\",\"+g[b+1],b<c-3&&(h+=\",\");a.corridor=h}f&&Ca(a,f);return np(this,\"search/corridor\",a,d,e)};U.prototype.searchByCorridor=U.prototype.g;\nU.prototype.j=function(a,b,c,d,e){function f(a,b){b&&h--;c(a,!h)}var g=[],h;if(!Za(a))throw new C(this.j,0,\"has invalid type\");B(b,G,this.j,1,\"has invalid type\");Fo(this.j,2,c,d);b={bbox:b.ka+\",\"+b.ga+\";\"+b.ja+\",\"+b.ha};e&&Ca(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(np(this,\"search/bbox\",b,f,d));return new Ho(g)};U.prototype.searchByBoundingBox=U.prototype.j;\nU.prototype.m=function(a,b,c,d){var e,f,g=[];if(!ra(a))throw new C(this.m,0,\"has invalid type\");Fo(this.m,1,b,c);e={layer_id:a};d&&Ca(e,d);d=this.b(\"search/all\",\"json\",e,function(d){d.geometries.length?(d=Xo(d,a),f=new fp(d,b,c),g.push(f)):b(De,!0)},c);g.push(d);return new Ho(g)};U.prototype.searchAll=U.prototype.m;var op={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/,update:null};\nfunction pp(a,b,c,d,e,f){function g(){ea++;d(this,ea===K)}function h(a){ea++;e(a,this,ea===K)}var k=\"append\"!==b,l,m,n,q,u,t={},y=Ka(),K=0,V=[],ea=0;if(!Za(c))throw new C(f,0,c);Fo(f,1,d,e);for(l=c.length;l--;){m=c[l];if(B(m,Po))if(n=m.tc().cd().layerId,q=m.a(\"GEOMETRY_ID\"),k){if(q===x||\"\"===String(q))u='GEOMETRY_ID must not be null or \"\"';t[q=n+\"_\"+q]&&(u=\"same GEOMETRY_ID for multiple rows\");t[q]=m}else q!==x&&\"\"!==String(q)&&(u='GEOMETRY_ID must be null or \"\"');else u=\"Invalid type\";if(u)throw new C(f,\n0,\"- Invalid row at index \"+l+\", \"+u);q=y[n];q||(q=y[n]=[],K++);q.push(m)}for(n in y){q=y[n];c=[];for(l=q.length;l--;)c.push(q[l].Ve);V.push(a.b(jp,\"json\",{layer_id:n,action:b,changes:q[0].tc().Df(op[b],c)},z(g,q),z(h,q)))}return new Ho(V)}U.prototype.o=function(a,b,c){return pp(this,\"append\",a,b,c,this.o)};U.prototype.appendRows=U.prototype.o;U.prototype.C=function(a,b,c){return pp(this,\"update\",a,b,c,this.C)};U.prototype.updateRows=U.prototype.C;\nU.prototype.B=function(a,b,c){return pp(this,\"delete\",a,b,c,this.B)};U.prototype.deleteRows=U.prototype.B;function Uo(a,b,c){var d=this,e=b&&b.rowFilter,f,g,h,k,l=to;Uo.u.constructor.call(this,c);B(a,U,Uo,0);h=c.resultType;To(b);e?(f=Qa(b),f.rowFilter=e.toString()):f=b;(new Lh).md(\"cle\",\"H.service.extension.worker.processor\");k=b.layerId;a.b(\"layers/list\",\"json\",{detail_level:\"all\",layer_id:k},function(b){b=b.layers;var c;for(c=0;c<b.length;c++)if(b[c].layerId===k){f.level=b[c].level;break}g=a.aa().clone().R(\"tiled/tile.json\").$({meta:1});(new Nh(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,\nonlyOutline:h===l.POLYLINE,serverUrl:g.toString(),layerConfigs:[f],batchTiles:!1}]})).then(function(){d.I=!0;Rg(d)},d.f)},function(a){d.f(a.message)})}v(Uo,xo);r(\"H.service.extension.customLocation.TileProvider\",Uo);Uo.prototype.P=function(a,b,c){return new so(a,b,c)};\nUo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:sc},l=!0,m,n=to;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.xc()||(d(Em.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=xm.setTimeout(function(){h=new Nh(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():xm.clearTimeout(m)});return k};Uo.prototype.requestInternal=Uo.prototype.c;Uo.prototype.D=function(){Uo.u.D.call(this);new Nh(\"cle\",{message:[this.uid,3]})};function qp(a){a=qm(rm.cre,a);qp.u.constructor.call(this,a)}v(qp,om);r(\"H.service.extension.customRoute.Service\",qp);rm.cre={subDomain:\"cre\",path:\"2\"};T.prototype.Ta=function(a){return this.W(new qp(a))};T.prototype.getCustomRoutingService=T.prototype.Ta;\nqp.prototype.b=function(a,b,c){function d(a){c(new w.Error(a))}Fo(this.b,1,b,c);a=this.aa().clone().R(\"calculateroute.json\").$(a);(new Gh(\"application/json\",a.toString())).then(b,function(a){\"error\"===a.type?d(a.statusText||\"Unable to load data\"):a.json().then(function(a){d(a.error_description||a.issues[0].message)},d)})};qp.prototype.calculateRoute=qp.prototype.b;r(\"H.service.buildInfo\",function(){return Bh(\"mapsjs-service\",\"0.16.0\",\"c55cdef\")});\n");
